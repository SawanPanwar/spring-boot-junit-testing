package com.rays.test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.*;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;

import com.rays.dao.UserDAO;
import com.rays.dto.UserDTO;
import com.rays.service.UserService;

public class TestUserService {

	@Mock
	private UserDAO userDAO;

	@InjectMocks
	private UserService userService;

	@BeforeEach
	void setUp() {
		MockitoAnnotations.openMocks(this);
	}

	@Test
	void testAdd() {
		UserDTO dto = new UserDTO();
		when(userDAO.add(dto)).thenReturn(1L);

		long result = userService.add(dto);
		assertEquals(1L, result);
		verify(userDAO).add(dto);
	}

	@Test
	void testUpdate() {
		UserDTO dto = new UserDTO();
		userService.update(dto);
		verify(userDAO).update(dto);
	}

	@Test
	void testDelete() {
		UserDTO dto = new UserDTO();
		when(userDAO.findByPk(1L)).thenReturn(dto);

		userService.delete(1L);
		verify(userDAO).findByPk(1L);
		verify(userDAO).delete(dto);
	}

	@Test
	void testFindById() {
		UserDTO dto = new UserDTO();
		when(userDAO.findByPk(1L)).thenReturn(dto);

		UserDTO result = userService.findById(1L);
		assertEquals(dto, result);
		verify(userDAO).findByPk(1L);
	}
}
