package com.rays.test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.mock.mockito.MockBean;

import com.rays.dao.UserDAO;
import com.rays.dto.UserDTO;
import com.rays.service.UserService;

@SpringBootTest
public class TestUserService {

	@Autowired
	private UserService userService;

	@MockBean
	private UserDAO userDAO;

	@Test
	public void testAdd() {
		UserDTO dto = new UserDTO();
		when(userDAO.add(dto)).thenReturn(1L);

		long result = userService.add(dto);
		assertEquals(1L, result);
		verify(userDAO).add(dto);
	}

	@Test
	public void testUpdate() {
		UserDTO dto = new UserDTO();
		userService.update(dto);
		verify(userDAO).update(dto);
	}

	@Test
	public void testDelete() {
		UserDTO dto = new UserDTO();
		when(userDAO.findByPk(1L)).thenReturn(dto);

		userService.delete(1L);
		verify(userDAO).findByPk(1L);
		verify(userDAO).delete(dto);
	}

}
